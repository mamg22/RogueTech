<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='main-icon.png') }}" type="image/x-icon">
    <script defer src="{{ url_for('static', filename='astar.js') }}"></script>
    <script defer src="{{ url_for('static', filename='demo.js') }}"></script>
    
    {% if config.ENVIRONMENT == 'development' %}
        <script defer src="{{ url_for('web.node_modules', filename='hyperscript.org/dist/_hyperscript.min.js.gz') }}"></script>
        <script defer src="{{ url_for('web.node_modules', filename='chance/dist/chance.min.js') }}"></script>
        <link href="/static/material-icons/material-icons.css" rel="stylesheet">
    {% else %}
        <script defer src="https://unpkg.com/hyperscript.org@0.9.11"></script>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    {% endif %}


    <link rel="stylesheet" href="{{ url_for('static', filename='demo.css') }}">
    <script src="{{ url_for('static', filename='main.js')}}"></script>
</head>
<body>
    <div id="game-area">
        <div id="main-hud" class="hud">
            <div class="health-indicator">
                <div><span class="material-icons">health_and_safety</span> <br> 99/100</div>
            </div>
            <div>
                <button _="on click call window.zoom(0.05)">+</button>
                <button _="on click call window.zoom(-0.05)">-</button>
            </div>
            <div class='clickable'
            _="on click call #pause-menu.showModal()"
            ><span class="material-icons md-36">menu</span></div>
    
        </div>
        <div id="game-view">
            <div id="map">
                <table id="map-table" _="
                init
                    repeat 17 times
                        make a <tr/>
                        set current_row to it
                        put it at the end of me
                        repeat 38 times
                            make a <td/>
                            set current_cell to it
                            put it at the end of current_row
                            make a <div/>
                            put it at the end of current_cell
                        end
                    end
                end
                "></table>
                <!-- <img src="/static/res/demo_map.png"> -->
            </div>
            <div id="entities">
                <img src="/static/res/player/standing-r.png" id="hero">
            </div>
        </div>
    </div>
    <div id="messages"></div>
    <dialog id="pause-menu">
        <form method="dialog" class="dialog-window">
            <div class="dialog-titlebar">
                <div class="dialog-title">
                    Men√∫
                </div>
                <div class="dialog-close"
                _="on click
                        set target to closest <form/>
                        call target.requestSubmit()"
                >
                    <span class="material-icons">close</span>
                </div>
            </div>
            <div class="dialog-body">
                <div>
                    <input type="checkbox" name="music" id="music" checked
                    _="on change call set_audio('bgm', not my checked)">
                    <label for="music">
                        <span class="material-icons">music_note</span> <br>
                        Musica
                    </label>
                </div>
                <div>
                    <input type="checkbox" name="sound" id="sound" checked
                    _="on change call set_audio('sfx', not my checked)">
                    <label for="sound">Sonido</label>
                </div>
            </div>
        </form>
    </dialog>
</body>
</html>